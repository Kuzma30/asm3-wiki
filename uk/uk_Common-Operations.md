# Створення простої збірки з обмеженнями

* Запустіть FreeCAD і створіть новий документ
* Перейдіть на робоче середовище `Part` і створіть `Куб` та `Циліндр`
* Перейдіть на робоче середовище `Assembly3`, натисніть ![AddAssembly](../raw/master/freecad/asm3/Gui/Resources/icons/Assembly_New_Assembly.svg?sanitize=true), щоб створити нову збірку
* Виберіть `куб` та `циліндр` і перетягніть їх в нову збірку
* Виберіть будь-яку поверхню `Циліндра` або `Куба` і натисніть ![Move](../raw/master/freecad/asm3/Gui/Resources/icons/Assembly_Move.svg?sanitize=true), щоб активувати переміщення деталей. Натисніть будь-яку стрілку, щоб перетягнути `Циліндр` наверх `Куба`, натисніть клавішу `ESC`, щоб закінчити переміщення деталі (Альтернатива: клацніть правою кнопкою миші на `Збірці` в ієрархії документа та натисніть `Завершити редагування`)
* Виберіть верхню грань `Куба` і (утримуючи клавішу `CTRL`) виберіть нижню грань або ребро `Циліндра`, а потім натисніть ![AddCoincidence](../raw/master/freecad/asm3/Gui/Resources/icons/constraints/Assembly_ConstraintCoincidence.svg?sanitize=true) для створення обмеження збігу на площині.
* Нарешті, натисніть ![Solve](../raw/master/freecad/asm3/Gui/Resources/icons/AssemblyWorkbench.svg?sanitize=true), щоб розв'язати систему обмежень.

[[images/simple.gif]]

Ви можете натиснути ![Auto recompute](../raw/master/freecad/asm3/Gui/Resources/icons/Assembly_AutoRecompute.svg?sanitize=true) для автоматичного вирішення будь-яких змін в обмеженні.

Після створення нового обмеження вибрані елементи будуть виділені червоним. Ви можете легко змінити колір окремих елементів обмеження на сторінці властивостей об’єкта. Або встановіть колір всього обмеження, змінивши колір самого об’єкта обмеження. Переконайтеся, що ви встановили властивість `OverrideMaterial` на `True`.

Якщо ви виявите, що обмежуючий елемент затемнює збірку у 3D-виді, ви можете увімкнути _Auto Element Visibility_, натиснувши ![AutoElementVis](../raw/master/freecad/asm3/Gui/Resources/icons/Assembly_AutoElementVis.svg?sanitize=true). Якщо увімкнено, всі обмежувальні елементи будуть приховані за замовчуванням. Ви можете побачити їх, виділивши будь-яке обмеження або об'єкт з обмежувальними елементами в ієрархії документа.

Тепер збережіть цей документ з будь-яким ім'ям.

# Створення Супер збірки з масивом зовнішніх посилань

We are going to build a multi-joint _thing_ using the above assembly as the base part.

* Створіть новий документ і збережіть його під своїм ім'ям. Так, вам потрібно зберегти як базовий, так і пов’язаний документ принаймні один раз, щоб зовнішнє посилання працювало, оскільки `PropertyXLink` потребує інформації про шлях до файлу обох документів для обчислення відносного шляху.
* Переконайтесь, що поточний активний 3D-вид — новий порожній документ. Тепер в ієрархії документа виберіть щойно створену збірку і утримуючи клавішу `CTRL` і клацніть правою кнопкою миші на новий елемент документа в ієрархії та оберіть `Link actions -> Make link`. Буде створено `Link(Посилання)`, яке перенесе збірку в новий документ. Можливо, вам потрібно буде натиснути `Fit content` (або натиснути `В,F` в 3D перегляді), щоб побачити збірку.
* Виберіть посилання в ієрархії та змініть властивість `ElementCount` на чотири. Тепер ми маємо 4 однакових збірки.
* Створіть нову збірку і перетягніть об'єкт з посиланням до неї.
* Оберіть будь-яку поверхню `Куба`, натисніть ![Move](../raw/master/freecad/asm3/Gui/Resources/icons/Assembly_Move.svg?sanitize=true) і натисніть будь-яку стрілку, щоб розсунути деталі. Натисніть на ребра поворотної сфери, щоб повернути деталь. Натисніть `Esc`, щоб завершити переміщення деталей.
* Оберіть будь-яку поверхню лівої частини `Куба` в 3D-виді та натисніть ![Lock](../raw/master/freecad/asm3/Gui/Resources/icons/constraints/Assembly_ConstraintLock.svg?sanitize=true), щоб заблокувати ліву під-збірку.
* Орієнтуйте за бажанням деталі. Виберіть дві площини в довільних збірках і створіть обмеження збігу площин. Якщо у вас ввімкнене _auto recompute_, тоді дві збірки буде з'єднано разом
* Зробіть те саме для решти деталей.

[[images/super.gif]]

Тепер, коли ми зробили цю багато-суглобову річ, спробуйте зберегти цей документ. FreeCAD запитає, чи бажаєте ви також зберегти зовнішній документ. Якщо ви відповісте Так, то FreeCAD подбає про порядок та збереже зовнішній документ перед зв'язуванням документа.

Закрийте обидва документи. Відкрийте документ нашої збірки, FreeCAD автоматично відкриє всі зовнішні документи, на які вона посилається. Якщо ви закриєте зовнішній файл, залишаючи файл збірки відкритим, усі зовнішні пов’язані об’єкти зникнуть з 3D-виду. Відкрийте знову зовнішній файл і об'єкти з’являться. Це дозволяє вам легко замінити файл на інший з будь-якої причини. Але він вимагає файла-заміни, що має об’єкт з таким самим внутрішнім ім’ям, що й початковий. Звичайно, ви можете повторно призначити посилання на будь-який інший об'єкт у відкритому документі. Просто використовуйте редактор властивостей, натисніть кнопку редагування `LinkedObject`. У вікні редактора виберіть необхідний документ зі списку, а потім виберіть потрібний об'єкт. Але зараз ви повинні переконатися, що новий пов'язаний об'єкт має аналогічний інтерфейс елементу, інакше обмеження будуть порушені.

Ще декілька слів про масив посилань. Assembly3 зазвичай розглядає будь-який об’єкт, доданий до його групи деталей, як самостійну одиницю, яку можна переміщувати як ціле. Однак він по особливому обробляє об’єкти масиву посилань. Кожен елемент масиву буде розглядатися як окремі одиниці, які мають окремі обмеження та можуть переміщатися окремо. Якщо ви дійсно хочете додати масив як неподільної одиниці, просто помістіть масив всередині фіктивної збірки без будь-яких обмежень і додайте її в залежну збірку.

До речі, робоче середовище `Draft` тепер має два варіанти масиву посилань, `LinkArray` та `LinkPathray`, які мають таку ж функціональність, як і `Draft` `Array` та `PathArray`, але використовує посилання для отримання копій. За замовчуванням ці масиви посилань не показують окремі елементи в ієрархії документу. Проте ви можете як завжди отримати доступ до кожного елемента через посилання `subname`. Менша кількість об'єктів може покращити час збереження та завантаження документів. Це особливо помітно, якщо у вас велика кількість елементів масиву. Однак, в будь-який час, ви можете показати елемент масиву перемкнувши параметр `ShowElement`. Як тільки елементи будуть видимі, їх можна незалежно переміщати шляхом зміни їх координат.

# Додавання/Зміна Елементу(Element) та Посилання на елементи(ElementLink)

Досить легко створити нове обмеження, як показано вище, причому всі залучені `Element` та `ElementLink` забезпечить за вас Assembly3. Також легко додавати нові або змінювати існуючі `Element-и` та `ElementLink`. Просто виберіть елемент геометрії в 3D-виді, і відповідний власник об'єкту буде вибрано в ієрархії документа (не забудьте увімкнути параметр _Sync selection_, як згадувалося раніше). Потім ви можете перетягнути вибраний елемент до `ElementGroup` `збірки`, щоб створити новий `Element` або до `Constraint`, щоб додати `ElementLink`. Ви можете змінити наявний `Element` або `ElementLink`, просто перетягнувши елемент на наявний об'єкт `Element` або `ElementLink`. Прогляньте [[цей|Replacing-Part]] навчальний курс для демонстрації.

# Переміщення деталей

Assembly3 має широку підтримку ручного пересування вкладених збірок. У режимі 3D виберіть будь-який елемент геометрії (Поверхня, Ребро), який належить до певної збірки, та натисніть ![Move](../raw/master/freecad/asm3/Gui/Resources/icons/Assembly_Move.svg?sanitize=true), щоб активувати переміщення деталі. Інструмент переміщення буде в центрі виділеного елементу геометрії. У разі багато ієрархічних збірках ви будете переміщувати перший рівень збірки верхнього рівня. Якщо замість цього ви хочете перемістити проміжну збірку, додайте цю збірку як другий вибір (`CTRL` вибір) перед активацією переміщення деталі.

Якщо ви ввімкнули ![AutoRecompute](../raw/master/freecad/asm3/Gui/Resources/icons/Assembly_AutoRecompute.svg?sanitize=true), будь-яке переміщення під-збірки призведе до автоматичного повторного обчислення її обмежень, як показано нижче. Оскільки залишилося занадто багато ступенів свободи, а отже, багато можливих рішень системи обмежень, переміщення багатошарової збірки є уривчастим. Крім того, команда переміщення деталей є дуже складна, і, ймовірно, потрібно багато часу на її вдосконалення. У випадку, коли деталі перемістились так, що вони застрягли в невірній позиції, як ви можете бачити на екрані нижче, просто натисніть `CTRL+Z`, щоб скасувати переміщення. Щоразу, коли ви відпускаєте кнопку миші, транзакція буде фіксуватися, щоб ви могли скасувати/повторити попереднє перетягування мишею. Ігнорувати переобчислення можна тримаючи `CTRL` під час переміщення.


[[images/move.gif]]

# Імпорт зовнішньої збірки

У деяких випадках, буде легше поширювати вашу мультиієрархічну збірку як єдиний самодостатній документ. Ядро FreeCAD надає зручну команду, щоб виконати це не тривіальне завдання. Просто клацніть правою кнопкою миші на будь-який елемент в документі, який ви бажаєте розповсюдити, і виберіть `Link actions -> Import all
links`, і це все. Натисни ![Solve](../raw/master/freecad/asm3/Gui/Resources/icons/AssemblyWorkbench.svg?sanitize=true), щоб побачити, що все в порядку. Звичайно, ви можете вибірково імпортувати будь-який об’єкт, який забажаєте. Просто клацніть правою кнопкою миші на ньому і виберіть `Link actions -> Import
link`.

